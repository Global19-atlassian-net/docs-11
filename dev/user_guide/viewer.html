

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Scikits-image viewer &mdash; skimage v0.6dev docs</title>
    
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/docversions.js"></script>
    <link rel="top" title="skimage v0.6dev docs" href="../index.html" />
    <link rel="up" title="User Guide" href="../user_guide.html" />
    <link rel="next" title="SciPy 2012 Sprint" href="../contribute.html" />
    <link rel="prev" title="Getting help on using skimage" href="getting_help.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <div class="logo"><a href="http://scikits-image.org">
            <img class="logo" src="../_static/scikits_image_logo_small.png" alt="Logo"/>
          </a></div>
       
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
             
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"> 

  
    <h3>Navigation</h3>
    <p>
    <a href="../index.html">Documentation Home</a>
    </p>
    <p>&nbsp;</p>
  


  <h4>Previous topic</h4>
  <p class="topless"><a href="getting_help.html"
                        title="previous chapter">Getting help on using <tt class="docutils literal docutils literal docutils literal"><span class="pre">skimage</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../contribute.html"
                        title="next chapter">SciPy 2012 Sprint</a></p>

  <h3>Version</h3>

    <script type="text/javascript">
      insert_version_links();
    </script>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="scikits-image-viewer">
<h1>Scikits-image viewer<a class="headerlink" href="#scikits-image-viewer" title="Permalink to this headline">Â¶</a></h1>
<p><cite>skimage.viewer</cite> provides a <a class="reference external" href="http://matplotlib.sourceforge.net/">matplotlib</a>-based <cite>ImageViewer</cite> for displaying images, with the goal of making
it easy to create interactive image editors. You can simply use it to display
an image:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skimage.viewer</span> <span class="kn">import</span> <span class="n">ImageViewer</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">camera</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span> <span class="o">=</span> <span class="n">ImageViewer</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Of course, you can easily use matplotlib&#8217;s <cite>imshow</cite> function (or alternatively,
<cite>skimage.io.imshow</cite> which adds support for multiple io-plugins) to display
images. The advantage of <cite>ImageViewer</cite> is that you can (fairly) easily add
plugins. Before discussing how to do that, let&#8217;s list some important attributes
of <cite>ImageViewer</cite>:</p>
<div class="highlight-python"><pre>image : array
    Image being viewed. Setting this value will update the displayed frame.
canvas, fig, ax : matplotlib canvas, figure, and axes
    matplotlib canvas, figure, and axes used to display image.
plugins : list
    List of attached plugins.</pre>
</div>
<p><cite>ImageViewer.image</cite> is implemented as a property&#8212;so that setting <cite>image</cite>
will update the displayed plot. Also, you can see from the list above that you
have access to matplotlib <cite>canvas</cite>, <cite>figure</cite>, and <cite>axes</cite> objects if needed.</p>
<p>The final attribute listed above is just a Python list of plugins, which
contains references to plugins for manipulating images. Currently, only a few
plugins are implemented, but it should be fairly easy to write your own. Before
going into the details, let&#8217;s see an example of how a plugin is added to the
viewer:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skimage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skimage.viewer.plugins</span> <span class="kn">import</span> <span class="n">EdgeDetector</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">image</span> <span class="o">=</span> <span class="n">skimage</span><span class="o">.</span><span class="n">img_as_float</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">camera</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span> <span class="o">=</span> <span class="n">ImageViewer</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EdgeDetector</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>As you can see above, the plugin (here, <cite>EdgeDetector</cite>) is simply initialized
with the viewer. This call adds the viewer to the plugin (which is required
because the plugin is manipulating the image and needs to update the viewer),
and under the hood, the plugin is adding itself to the viewer (this cross
reference is used to clean things up if the viewer is closed&#8212;it isn&#8217;t too
important to understand).</p>
<p>To explain how to create a plugin, let&#8217;s look at a slightly-simplified version
of <cite>EdgeDetector</cite>. The main parts to notice are that the plugin 1) subclasses
<cite>Plugin</cite>, 2) takes an <cite>ImageViewer</cite> instance as an argument, and 3) creates its
own <cite>figure</cite>, which holds some slider widgets for adjusting the parameters of
the edge detector:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">skimage.filter</span> <span class="kn">import</span> <span class="n">canny</span>
<span class="kn">from</span> <span class="nn">skimage.viewer.plugins.base</span> <span class="kn">import</span> <span class="n">Plugin</span>
<span class="kn">from</span> <span class="nn">skimage.viewer.widgets.slider</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="k">class</span> <span class="nc">EdgeDetector</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plugin to detect edges in an image using a Sobel detector.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    image_viewer : ImageViewer instance.</span>
<span class="sd">        Window containing image used in measurement.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_viewer</span><span class="p">,</span> <span class="n">sigma_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">low_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                 <span class="n">high_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)):</span>
        <span class="c"># custom figure to control the layout of sliders</span>
        <span class="n">figure</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">Plugin</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_viewer</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">figure</span><span class="p">)</span>

        <span class="c"># unpack the 3 axes created above and use them for slider widgets.</span>
        <span class="n">ax_sigma</span><span class="p">,</span> <span class="n">ax_low</span><span class="p">,</span> <span class="n">ax_high</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider_sigma</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">ax_sigma</span><span class="p">,</span> <span class="n">sigma_range</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;sigma&#39;</span><span class="p">,</span>
                                   <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">on_release</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">update_image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider_low</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">ax_low</span><span class="p">,</span> <span class="n">low_range</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;low&#39;</span><span class="p">,</span>
                                 <span class="n">value</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">on_release</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">update_image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider_high</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">ax_high</span><span class="p">,</span> <span class="n">high_range</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;high&#39;</span><span class="p">,</span>
                                  <span class="n">value</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">on_release</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">update_image</span><span class="p">)</span>

        <span class="c"># save original image b/c we always want to filter the original.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_image</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">canny</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_image</span><span class="p">,</span>
                                  <span class="n">sigma</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_sigma</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                                  <span class="n">low_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_low</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                                  <span class="n">high_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_high</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that the <cite>ImageViewer</cite> instance gets passed to the <cite>Plugin</cite> base class,
which saves it in the <cite>viewer</cite> attribute. The viewer can then be accessed in
order to update the displayed image (see <cite>update_image</cite> method). Finally, the slider widgets are connected to the <cite>update_image</cite> method so that the <cite>canny</cite>
filter is applied to the image whenever you adjust the sliders.</p>
<p>The actual implementation of <cite>EdgeDetector</cite> has a few other parts (slightly
enhancing user-interaction and aesthetics), but this is really all you need to
write your own plugin. You can find more examples by browsing the source in
<cite>skimage.viewer.plugins</cite>.</p>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="clearer"></div>
    </div>
    </div>

    <div class="footer-wrapper">
      
    <div class="footer">
        &copy; Copyright 2011, the scikits-image team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
    </div>

  </body>
</html>