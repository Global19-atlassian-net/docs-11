



<!DOCTYPE html>
<html lang="en">
<head>
        <title>Swirl &mdash; skimage v0.9dev docs</title>
    
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link href="../_static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="../_static/css/custom.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
    
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="../_static/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <link rel="top" title="skimage v0.9dev docs" href="../index.html" />
        <link rel="up" title="General examples" href="index.html" />
        <link rel="next" title="Template Matching" href="plot_template.html" />
        <link rel="prev" title="Structural similarity index" href="plot_ssim.html" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="shortcut icon" href="../_static/favicon.ico">
</head>
<body class="container">
    <a href="http://scikit-image.org" class="logo"><img src="../_static/img/logo.png" alt=""></a>
    <div class="clearfix"></div>
    <div class="navbar">
        <div class="navbar-inner">
            <ul class="nav">
                <li><a href="/">Home</a></li>
<li><a href="/download.html">Download</a></li>
<li><a href="/docs/dev/auto_examples">Gallery</a></li>
<li><a href="/docs/dev">Documentation</a></li>
<li><a href="https://github.com/scikit-image/scikit-image">Source</a></li>
            </ul>
            <form class="navbar-form pull-right" action="../search.html" method="get">
                <input type="text" class="search span3" name="q" placeholder="Search documentation ...">
                <input type="hidden" name="check_keywords" value="yes" >
                <input type="hidden" name="area" value="default" >
            </form>
        </div>
    </div>
    <div class="row">
        <div class="span9">
            
  <div class="section" id="swirl">
<span id="example-plot-swirl-py"></span><h1>Swirl<a class="headerlink" href="#swirl" title="Permalink to this headline">¶</a></h1>
<p>Image swirling is a non-linear image deformation that creates a whirlpool
effect.  This example describes the implementation of this transform in
<tt class="docutils literal"><span class="pre">skimage</span></tt>, as well as the underlying warp mechanism.</p>
<div class="section" id="image-warping">
<h2>Image warping<a class="headerlink" href="#image-warping" title="Permalink to this headline">¶</a></h2>
<p>When applying a geometric transformation on an image, we typically make use of
a reverse mapping, i.e., for each pixel in the output image, we compute its
corresponding position in the input.  The reason is that, if we were to do it
the other way around (map each input pixel to its new output position), some
pixels in the output may be left empty.  On the other hand, each output
coordinate has exactly one corresponding location in (or outside) the input
image, and even if that position is non-integer, we may use interpolation to
compute the corresponding image value.</p>
</div>
<div class="section" id="performing-a-reverse-mapping">
<h2>Performing a reverse mapping<a class="headerlink" href="#performing-a-reverse-mapping" title="Permalink to this headline">¶</a></h2>
<p>To perform a geometric warp in <tt class="docutils literal"><span class="pre">skimage</span></tt>, you simply need to provide the
reverse mapping to the <tt class="docutils literal"><span class="pre">skimage.transform.warp</span></tt> function.  E.g., consider the
case where we would like to shift an image 50 pixels to the left.  The reverse
mapping for such a shift would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">shift_left</span><span class="p">(</span><span class="n">xy</span><span class="p">):</span>
    <span class="n">xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">50</span>
    <span class="k">return</span> <span class="n">xy</span>
</pre></div>
</div>
<p>The corresponding call to warp is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">skimage.transform</span> <span class="kn">import</span> <span class="n">warp</span>
<span class="n">warp</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">shift_left</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-swirl-transformation">
<h2>The swirl transformation<a class="headerlink" href="#the-swirl-transformation" title="Permalink to this headline">¶</a></h2>
<p>Consider the coordinate <img class="math" src="../_images/math/adfd9ae8a3fac031d3b8b470a52a709a23d4d6d2.png" alt="(x, y)"/> in the output image.  The reverse
mapping for the swirl transformation first computes, relative to a center
<img class="math" src="../_images/math/d3ea5ae5f5092b7024a8775d282032dc76120c9d.png" alt="(x_0, y_0)"/>, its polar coordinates,</p>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">heta = rctan(y/x)</tt>)</p>
latex exited with error:
[stderr]

[stdout]
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2011/06/27&gt;
Babel &lt;v3.8m&gt; and hyphenation patterns for english, dumylang, nohyphenation, ge
rman-x-2012-05-30, ngerman-x-2012-05-30, afrikaans, ancientgreek, ibycus, arabi
c, armenian, basque, bulgarian, catalan, pinyin, coptic, croatian, czech, danis
h, dutch, ukenglish, usenglishmax, esperanto, estonian, ethiopic, farsi, finnis
h, french, friulan, galician, german, ngerman, swissgerman, monogreek, greek, h
ungarian, icelandic, assamese, bengali, gujarati, hindi, kannada, malayalam, ma
rathi, oriya, panjabi, tamil, telugu, indonesian, interlingua, irish, italian, 
kurmanji, latin, latvian, lithuanian, mongolian, mongolianlmc, bokmal, nynorsk,
 polish, portuguese, romanian, romansh, russian, sanskrit, serbian, serbianc, s
lovak, slovenian, spanish, swedish, turkish, turkmen, ukrainian, uppersorbian, 
welsh, loaded.
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/tools/bm.sty)
No file math.aux.
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/ucsencs.def)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/umsb.fd)

! Package inputenc Error: Keyboard character used is undefined
(inputenc)                in inputencoding `utf8x&#8217;.

See the inputenc package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.14 \end{gather}
                 

! Package inputenc Error: Keyboard character used is undefined
(inputenc)                in inputencoding `utf8x&#8217;.

See the inputenc package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.14 \end{gather}
                 
[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 300 bytes).
Transcript written on math.log.
</div>
<p>ho = sqrt{(x - x_0)^2 + (y - y_0)^2},</p>
<p>and then transforms them according to</p>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">r = \ln(2) \, \mathtt{radius} / 5

\phi = \mathtt{rotation}

s = \mathtt{strength}

    heta' = \phi + s \, e^{-</tt>)</p>
latex exited with error:
[stderr]

[stdout]
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2011/06/27&gt;
Babel &lt;v3.8m&gt; and hyphenation patterns for english, dumylang, nohyphenation, ge
rman-x-2012-05-30, ngerman-x-2012-05-30, afrikaans, ancientgreek, ibycus, arabi
c, armenian, basque, bulgarian, catalan, pinyin, coptic, croatian, czech, danis
h, dutch, ukenglish, usenglishmax, esperanto, estonian, ethiopic, farsi, finnis
h, french, friulan, galician, german, ngerman, swissgerman, monogreek, greek, h
ungarian, icelandic, assamese, bengali, gujarati, hindi, kannada, malayalam, ma
rathi, oriya, panjabi, tamil, telugu, indonesian, interlingua, irish, italian, 
kurmanji, latin, latvian, lithuanian, mongolian, mongolianlmc, bokmal, nynorsk,
 polish, portuguese, romanian, romansh, russian, sanskrit, serbian, serbianc, s
lovak, slovenian, spanish, swedish, turkish, turkmen, ukrainian, uppersorbian, 
welsh, loaded.
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/tools/bm.sty) (./math.aux)
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/ucsencs.def)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/umsb.fd))
Runaway argument?
\notag \\\begin {split} heta&#8217; = \phi + s \, e^{-\end {split}\notag \end \ETC.
! File ended while scanning use of \gather.
&lt;inserted text&gt; 
                \par 
&lt;*&gt; math.tex
            
! Emergency stop.
&lt;*&gt; math.tex
            
No pages of output.
Transcript written on math.log.
</div>
<p>ho / r +        heta}</p>
<p>where <tt class="docutils literal"><span class="pre">strength</span></tt> is a parameter for the amount of swirl, <tt class="docutils literal"><span class="pre">radius</span></tt> indicates
the swirl extent in pixels, and <tt class="docutils literal"><span class="pre">rotation</span></tt> adds a rotation angle.  The
transformation of <tt class="docutils literal"><span class="pre">radius</span></tt> into <img class="math" src="../_images/math/b55ca7a0aa88ab7d58f4fc035317fdac39b17861.png" alt="r"/> is to ensure that the
transformation decays to <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">pprox 1/1000^{\mathsf{th}}</tt>)</p>
latex exited with error:
[stderr]

[stdout]
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2011/06/27&gt;
Babel &lt;v3.8m&gt; and hyphenation patterns for english, dumylang, nohyphenation, ge
rman-x-2012-05-30, ngerman-x-2012-05-30, afrikaans, ancientgreek, ibycus, arabi
c, armenian, basque, bulgarian, catalan, pinyin, coptic, croatian, czech, danis
h, dutch, ukenglish, usenglishmax, esperanto, estonian, ethiopic, farsi, finnis
h, french, friulan, galician, german, ngerman, swissgerman, monogreek, greek, h
ungarian, icelandic, assamese, bengali, gujarati, hindi, kannada, malayalam, ma
rathi, oriya, panjabi, tamil, telugu, indonesian, interlingua, irish, italian, 
kurmanji, latin, latvian, lithuanian, mongolian, mongolianlmc, bokmal, nynorsk,
 polish, portuguese, romanian, romansh, russian, sanskrit, serbian, serbianc, s
lovak, slovenian, spanish, swedish, turkish, turkmen, ukrainian, uppersorbian, 
welsh, loaded.
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2012/texmf-dist/tex/latex/tools/bm.sty) (./math.aux)
(/usr/local/texlive/2012/texmf-dist/tex/latex/ucs/ucsencs.def)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2012/texmf-dist/tex/latex/amsfonts/umsb.fd)

! Package inputenc Error: Keyboard character used is undefined
(inputenc)                in inputencoding `utf8x&#8217;.

See the inputenc package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.12 $^^G
         pprox 1/1000^{\mathsf{th}}$
[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 312 bytes).
Transcript written on math.log.
</div>
 within the
specified radius.</p>
<img alt="../_images/plot_swirl_1.png" class="align-center" src="../_images/plot_swirl_1.png" />
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span>
<span class="kn">from</span> <span class="nn">skimage.transform</span> <span class="kn">import</span> <span class="n">swirl</span>


<span class="n">image</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">checkerboard</span><span class="p">()</span>
<span class="n">swirled</span> <span class="o">=</span> <span class="n">swirl</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">strength</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="n">ax0</span><span class="p">,</span> <span class="n">ax1</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">ax0</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">gray</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">)</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">swirled</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">gray</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Python source code:</strong> <a class="reference download internal" href="../_downloads/plot_swirl.py"><tt class="xref download docutils literal"><span class="pre">download</span></tt></a>
(generated using <tt class="docutils literal"><span class="pre">skimage</span></tt> 0.9dev)</p>
</div>
</div>


        </div>
        <div class="span3"><h4 class="sidebar-box-heading">Navigation</h4>
<div class="well sidebar-box">
    <ul class="nav nav-list">
        <li><a href="../index.html">Documentation Home</a></li>
    </ul>
</div>
    <h4 class="sidebar-box-heading">Previous topic</h4>
    <div class="well sidebar-box">
        <ul class="nav nav-list">
            <li><a href="plot_ssim.html" title="previous chapter">Structural similarity index</a></li>
        </ul>
    </div>
    <h4 class="sidebar-box-heading">Next topic</h4>
    <div class="well sidebar-box">
        <ul class="nav nav-list">
            <li><a href="plot_template.html" title="next chapter">Template Matching</a></li>
        </ul>
    </div>
        <h4 class="sidebar-box-heading">Contents</h4>
        <div class="well sidebar-box toc">
            <ul class="nav nav-list">
<li><a class="reference internal" href="#">Swirl</a><ul class="nav nav-list">
<li><a class="reference internal" href="#image-warping">Image warping</a></li>
<li><a class="reference internal" href="#performing-a-reverse-mapping">Performing a reverse mapping</a></li>
<li><a class="reference internal" href="#the-swirl-transformation">The swirl transformation</a></li>
</ul>
</li>
</ul>

        </div>

<h4 class="sidebar-box-heading">Versions</h4>
<div class="well sidebar-box">
    <ul class="nav nav-list">
        <script src="../_static/docversions.js"></script>
        <script type="text/javascript">
            insert_version_links();
        </script>
    </ul>
</div>
        </div>
    </div>
    <div class="well footer">
        <small>
            &copy; Copyright the scikit-image development team.
            Created using <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.
        </small>
    </div>
</body>
</html>